package co.zerono.pc.handlers;

import java.io.File;

import co.zerono.pc.helpers.MathHelper;
import co.zerono.pc.reference.Messages;
import co.zerono.pc.reference.Names;
import co.zerono.pc.reference.Reference;
import co.zerono.pc.reference.Settings;
import cpw.mods.fml.client.event.ConfigChangedEvent;
import cpw.mods.fml.common.eventhandler.SubscribeEvent;
import net.minecraft.util.StatCollector;
import net.minecraftforge.common.config.Configuration;

public class ConfigurationHandler 
{
	private static Configuration configuration;

	public static void init(File configFile)
	{
		if(configuration == null)
		{
			configuration = new Configuration(configFile);
			loadConfiguration();
		}
	}
	
    private static void saveChanges()
    {

        if (ConfigurationHandler.configuration.hasChanged())
        {
        	ConfigurationHandler.configuration.save();
        }
    }
	public static void loadConfiguration()
	{
		Settings.Master.GEN_POOR = configuration.getBoolean("GEN_POOR", Messages.Configuration.CATEGORY_MASTER, false, StatCollector.translateToLocal(Messages.Configuration.MASTER_GEN_POOR_COMMENT), Messages.Configuration.GEN_ORE_LABEL);
		Settings.Master.GEN_ORE = configuration.getBoolean("GEN_ORE", Messages.Configuration.CATEGORY_MASTER, true, StatCollector.translateToLocal(Messages.Configuration.MASTER_GEN_ORE_COMMENT), Messages.Configuration.GEN_ORE_LABEL);
		Settings.Master.GEN_DENSE = configuration.getBoolean("GEN_DENSE", Messages.Configuration.CATEGORY_MASTER, false, StatCollector.translateToLocal(Messages.Configuration.MASTER_GEN_DENSE_COMMENT), Messages.Configuration.GEN_ORE_LABEL);
		
		Settings.Ore.ORE_NAMES = configuration.get(Messages.Configuration.CATEGORY_ORES, "ORE_NAMES", Names.Blocks.ORE_NAMES_DEFAULT).getStringList();
		
		//Settings.Ore.ORE_NAMES = configuration.getStringList("ORE_NAMES", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_NAMES_DEFAULT, StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_NAME_COMMENT));
		Settings.Ore.ORE_TOOL_CLASS = configuration.getStringList("TOOL_CLASS", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_TOOL_CLASS_DEFAULT,StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_TOOL_CLASS_COMMENT));
		Settings.Ore.ORE_HARVEST_LEVEL = MathHelper.stringToInteger(configuration.getStringList("Harvest_Level", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_HARVEST_LEVEL_DEFAULT,StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_HARVENST_LEVEL_COMMENT)));
		Settings.Ore.ORE_XP = MathHelper.stringToInteger(configuration.getStringList("ORE_XP", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_XP_DEFAULT,StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_XP_COMMENT)));
		Settings.Ore.ORE_CHUNK_CHANCE = MathHelper.stringToInteger(configuration.getStringList("CHUNK_CHANCE", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_CHUNK_CHANCE_DEFAULT,StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_CHUNCK_CHANCE_COMMENT)));
		Settings.Ore.ORE_MAX_Y = MathHelper.stringToInteger(configuration.getStringList("MAX_Y", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_MAX_Y_DEFAULT,StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_MAX_Y_COMMENT)));
		Settings.Ore.ORE_MIN_Y = MathHelper.stringToInteger(configuration.getStringList("MIN_Y", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_MIN_Y_DEFAULT,StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_MIN_Y_COMMENT)));
		Settings.Ore.ORE_PER_VEIN = MathHelper.stringToInteger(configuration.getStringList("ORE_PER_VEIN", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_PER_VEIN_DEFAULT,StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_PER_VIEN_COMMENT)));
		Settings.Ore.ORE_VEINS_PER_CHUNK = MathHelper.stringToInteger(configuration.getStringList("ORE_VEINS_PER_CHUNK", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_VIENS_PER_CHUNK_DEFAULT,StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_VIENS_PER_CHUNK_COMMENT)));
		
		/*
				Settings.Ore.ORE_TOOL_CLASS = configuration.get(Messages.Configuration.CATEGORY_ORES, "ORE_TOOL_CLASS", Names.Blocks.ORE_TOOL_CLASS_DEFAULT).getStringList();
				Settings.Ore.ORE_HARVEST_LEVEL = MathHelper.stringToInteger(configuration.get(Messages.Configuration.CATEGORY_ORES, "ORE_HARVEST_LEVEL", Names.Blocks.ORE_HARVEST_LEVEL_DEFAULT).getStringList());
				Settings.Ore.ORE_XP = MathHelper.stringToInteger(configuration.get(Messages.Configuration.CATEGORY_ORES, "ORE_XP", Names.Blocks.ORE_XP_DEFAULT).getStringList());
				Settings.Ore.ORE_CHUNK_CHANCE = MathHelper.stringToInteger(configuration.get(Messages.Configuration.CATEGORY_ORES, "ORE_CHUNK_CHANCE", Names.Blocks.ORE_CHUNK_CHANCE_DEFAULT).getStringList());
				Settings.Ore.ORE_MAX_Y = MathHelper.stringToInteger(configuration.get(Messages.Configuration.CATEGORY_ORES, "ORE_MAX_Y", Names.Blocks.ORE_MAX_Y_DEFAULT).getStringList());
				Settings.Ore.ORE_MIN_Y = MathHelper.stringToInteger(configuration.get(Messages.Configuration.CATEGORY_ORES, "ORE_MIN_Y", Names.Blocks.ORE_MIN_Y_DEFAULT).getStringList());
				Settings.Ore.ORE_PER_VEIN = MathHelper.stringToInteger(configuration.get(Messages.Configuration.CATEGORY_ORES, "ORE_PER_VEIN", Names.Blocks.ORE_PER_VEIN_DEFAULT).getStringList());
				Settings.Ore.ORE_VEINS_PER_CHUNK = MathHelper.stringToInteger(configuration.get(Messages.Configuration.CATEGORY_ORES, "ORE_VEINS_PER_CHUNK", Names.Blocks.ORE_VIENS_PER_CHUNK_DEFAULT).getStringList());

		*/
		
		ConfigurationHandler.saveChanges();
	}
	@SubscribeEvent
	public void conConfigurationChangedEvent(ConfigChangedEvent.OnConfigChangedEvent event)
	{
		if (event.modID.equalsIgnoreCase(Reference.MOD_ID))
		{
			loadConfiguration();
		}
	}
}

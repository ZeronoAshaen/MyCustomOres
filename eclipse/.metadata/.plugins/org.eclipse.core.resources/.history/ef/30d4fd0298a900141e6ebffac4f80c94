package co.zerono.pc.handlers;

import co.zerono.pc.helpers.MathHelper;
import co.zerono.pc.reference.Messages;
import co.zerono.pc.reference.Names;
import co.zerono.pc.reference.Settings;
import net.minecraft.util.StatCollector;
import net.minecraftforge.common.config.Configuration;

public class ConfigurationHandler 
{
	private static Configuration configuration;
	
	private static boolean getBoolean(String categories, String key, boolean defaultValue)
	{
		boolean b = ConfigurationHandler.configuration.get(categories, key, defaultValue).getBoolean(defaultValue);
		
        ConfigurationHandler.saveChanges();
		
		return b;
	}
	private static String getName(String categories, String key, String defaultValue)
	{
		String string = ConfigurationHandler.configuration.get(categories, key, defaultValue).toString();
		
        ConfigurationHandler.saveChanges();
		
		return string;
	}
	/**
     * Gets ore generation dimension information
     * 
     * @param oreTag
     *            Ore configuration tag, this will be use to create sub
     *            category under generation category.
     * @param defaultDimensions
     *            Default dimensions information for ore generation
     * @return
     *         dimensions ore generation information from configuration file
     */
    public static int[] getOreGenInfo(String oreName, int[] defaultInfo)
    {

        int veinsPerChunk = ConfigurationHandler.configuration.get("ore." + oreName, "veins_per_chunk", defaultInfo[0]).getInt(defaultInfo[0]);
        int oresPreVein = ConfigurationHandler.configuration.get("ore." + oreName, "ores_per_vein", defaultInfo[1]).getInt(defaultInfo[1]);
        int minYLevel = ConfigurationHandler.configuration.get("ore." + oreName, "min_Y_level", defaultInfo[2]).getInt(defaultInfo[2]);
        int maxYLevel = ConfigurationHandler.configuration.get("ore." + oreName, "max_Y_level", defaultInfo[3]).getInt(defaultInfo[3]);
        int chunkChance = ConfigurationHandler.configuration.get("ore." + oreName, "chunk_chance", defaultInfo[4]).getInt(defaultInfo[4]);

        ConfigurationHandler.saveChanges();

        int[] generationInfo = { veinsPerChunk, oresPreVein, minYLevel, maxYLevel, chunkChance };
        return generationInfo;
    }
    public static boolean regen()
    {
        return ConfigurationHandler.getBoolean("world_Regen", "regen_ores", false);
    }
    public static String regenKey()
    {
        return ConfigurationHandler.getName("world_Regen", "regen_key", "DEFAULT");
    }
    private static void saveChanges()
    {

        if (ConfigurationHandler.configuration.hasChanged())
        {
        	ConfigurationHandler.configuration.save();
        }
    }
	public static void loadconfiguration()
	{
		Settings.Master.GEN_POOR = configuration.getBoolean("GEN_POOR", Messages.Configuration.CATEGORY_MASTER, true, StatCollector.translateToLocal(Messages.Configuration.MASTER_GEN_POOR_COMMENT), Messages.Configuration.GEN_ORE_LABEL);
		Settings.Master.GEN_ORE = configuration.getBoolean("GEN_ORE", Messages.Configuration.CATEGORY_MASTER, true, StatCollector.translateToLocal(Messages.Configuration.MASTER_GEN_ORE_COMMENT), Messages.Configuration.GEN_ORE_LABEL);
		Settings.Master.GEN_DENSE = configuration.getBoolean("GEN_DENSE", Messages.Configuration.CATEGORY_MASTER, true, StatCollector.translateToLocal(Messages.Configuration.MASTER_GEN_DENSE_COMMENT), Messages.Configuration.GEN_ORE_LABEL);
		
		Settings.Ore.ORE_NAMES = configuration.getStringList("ORE_NAMES", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_NAMES_DEFAULT, null /*StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_NAME_COMMENT)*/);
		Settings.Ore.ORE_TOOL_CLASS = configuration.getStringList("TOOL_CLASS", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_TOOL_CLASS_DEFAULT,null /*StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_TOOL_CLASS_COMMENT)*/);
		Settings.Ore.ORE_HARVEST_LEVEL = MathHelper.stringToInteger(configuration.getStringList("Harvest_Level", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_HARVEST_LEVEL_DEFAULT,null /*StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_HARVENST_LEVEL_COMMENT))*/);
		Settings.Ore.ORE_XP = MathHelper.stringToInteger(configuration.getStringList("ORE_XP", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_XP_DEFAULT, null /*StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_XP_COMMENT))*/);
		Settings.Ore.ORE_CHUNK_CHANCE = MathHelper.stringToInteger(configuration.getStringList("CHUNK_CHANCE", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_CHUNK_CHANCE_DEFAULT, null /*StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_CHUNCK_CHANCE_COMMENT))*/);
		Settings.Ore.ORE_MAX_Y = MathHelper.stringToInteger(configuration.getStringList("MAX_Y", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_MAX_Y_DEFAULT, null /*StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_MAX_Y_COMMENT))*/);
		Settings.Ore.ORE_MIN_Y = MathHelper.stringToInteger(configuration.getStringList("MIN_Y", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_MIN_Y_DEFAULT, null /*StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_MIN_Y_COMMENT))*/);
		Settings.Ore.ORE_PER_VEIN = MathHelper.stringToInteger(configuration.getStringList("ORE_PER_VEIN", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_PER_VEIN_DEFAULT,null /* StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_PER_VIEN_COMMENT))*/);
		Settings.Ore.ORE_VEINS_PER_CHUNK = MathHelper.stringToInteger(configuration.getStringList("ORE_VEINS_PER_CHUNK", Messages.Configuration.CATEGORY_ORES, Names.Blocks.ORE_VIENS_PER_CHUNK_DEFAULT, null /*StatCollector.translateToLocal(Messages.Configuration.GEN_ORE_VIENS_PER_CHUNK_COMMENT))*/);
		
	}
	
}
